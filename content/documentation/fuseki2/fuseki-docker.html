<!DOCTYPE html>
<html lang="en">
<head>
    

    <title>Apache Jena - Fuseki : Docker Tools</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="/css/bootstrap-extension.css" rel="stylesheet" type="text/css">
    <link href="/css/jena.css" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href="/images/favicon.ico" />

    <script src="https://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
            crossorigin="anonymous"></script>
    <script src="/js/jena-navigation.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>

    <script src="/js/improve.js" type="text/javascript"></script>

    
</head>

<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/index.html">
                <img class="logo-menu" src="/images/jena-logo/jena-logo-notext-small.png" alt="jena logo">Apache Jena</a>
        </div>

        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                <li id="homepage"><a href="/index.html"><span class="glyphicon glyphicon-home"></span> Home</a></li>
                <li id="download"><a href="/download/index.cgi"><span class="glyphicon glyphicon-download-alt"></span> Download</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-book"></span> Learn <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-header">Tutorials</li>
                        <li><a href="/tutorials/index.html">Overview</a></li>
                        <li><a href="/documentation/fuseki2/index.html">Fuseki Triplestore</a></li>
                        <li><a href="/documentation/notes/index.html">How-To's</a></li>
                        <li><a href="/documentation/query/manipulating_sparql_using_arq.html">Manipulating SPARQL using ARQ</a></li>
                        <li><a href="/tutorials/rdf_api.html">RDF core API tutorial</a></li>
                        <li><a href="/tutorials/sparql.html">SPARQL tutorial</a></li>
                        <li><a href="/tutorials/using_jena_with_eclipse.html">Using Jena with Eclipse</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">References</li>
                        <li><a href="/documentation/index.html">Overview</a></li>
                        <li><a href="/documentation/query/index.html">ARQ (SPARQL)</a></li>
                        <li><a href="/documentation/assembler/index.html">Assembler</a></li>
                        <li><a href="/documentation/tools/index.html">Command-line tools</a></li>
                        <li><a href="/documentation/rdfs/">Data with RDFS Inferencing</a></li>
                        <li><a href="/documentation/geosparql/index.html">GeoSPARQL</a></li>
                        <li><a href="/documentation/inference/index.html">Inference API</a></li>
                        <li><a href="/documentation/javadoc.html">Javadoc</a></li>
                        <li><a href="/documentation/ontology/">Ontology API</a></li>
                        <li><a href="/documentation/permissions/index.html">Permissions</a></li>
                        <li><a href="/documentation/extras/querybuilder/index.html">Query Builder</a></li>
                        <li><a href="/documentation/rdf/index.html">RDF API</a></li>
                        <li><a href="/documentation/rdfconnection/">RDF Connection - SPARQL API</a></li>
                        <li><a href="/documentation/io/">RDF I/O</a></li>
                        <li><a href="/documentation/rdfstar/index.html">RDF-star</a></li>
                        <li><a href="/documentation/shacl/index.html">SHACL</a></li>
                        <li><a href="/documentation/shex/index.html">ShEx</a></li>
                        <li><a href="/documentation/jdbc/index.html">SPARQL over JDBC</a></li>
                        <li><a href="/documentation/tdb/index.html">TDB</a></li>
                        <li><a href="/documentation/tdb2/index.html">TDB2</a></li>
                        <li><a href="/documentation/query/text-query.html">Text Search</a></li>
                    </ul>
                </li>

                <li class="drop down">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-book"></span> Javadoc <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="/documentation/javadoc.html">All Javadoc</a></li>
                        <li><a href="/documentation/javadoc/arq/">ARQ</a></li>
                        <li><a href="/documentation/javadoc_elephas.html">Elephas</a></li>
                        <li><a href="/documentation/javadoc/fuseki2/">Fuseki</a></li>
                        <li><a href="/documentation/javadoc/geosparql/">GeoSPARQL</a></li>
                        <li><a href="/documentation/javadoc/jdbc/">JDBC</a></li>
                        <li><a href="/documentation/javadoc/jena/">Jena Core</a></li>
                        <li><a href="/documentation/javadoc/permissions/">Permissions</a></li>
                        <li><a href="/documentation/javadoc/extras/querybuilder/">Query Builder</a></li>
                        <li><a href="/documentation/javadoc/shacl/">SHACL</a></li>
                        <li><a href="/documentation/javadoc/tdb/">TDB</a></li>
                        <li><a href="/documentation/javadoc/text/">Text Search</a></li>
                    </ul>
                </li>

                <li id="ask"><a href="/help_and_support/index.html"><span class="glyphicon glyphicon-question-sign"></span> Ask</a></li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-bullhorn"></span> Get involved <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="/getting_involved/index.html">Contribute</a></li>
                        <li><a href="/help_and_support/bugs_and_suggestions.html">Report a bug</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">Project</li>
                        <li><a href="/about_jena/about.html">About Jena</a></li>
                        <li><a href="/about_jena/architecture.html">Architecture</a></li>
                        <li><a href="/about_jena/citing.html">Citing</a></li>
                        <li><a href="/about_jena/team.html">Project team</a></li>
                        <li><a href="/about_jena/contributions.html">Related projects</a></li>
                        <li><a href="/about_jena/roadmap.html">Roadmap</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">ASF</li>
                        <li><a href="http://www.apache.org/">Apache Software Foundation</a></li>
                        <li><a href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li>
                        <li><a href="http://www.apache.org/licenses/LICENSE-2.0">License</a></li>
                        <li><a href="http://www.apache.org/security/">Security</a></li>
                        <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    </ul>
                </li>


    

                <li id="edit"><a href="https://github.com/apache/jena-site/edit/main/source/documentation/fuseki2/fuseki-docker.md" title="Edit this page on GitHub"><span class="glyphicon glyphicon-pencil"></span> Edit this page</a></li>
            </ul>
        </div>
    </div>
</nav>


<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div id="breadcrumbs">
                
                    





<ol class="breadcrumb">
    
    
        
        
    
        
        
            
                <li><a href='/documentation'>DOCUMENTATION</a></li>
            
            
        
    
        
        
            
                <li><a href='/documentation/fuseki2'>FUSEKI2</a></li>
            
            
        
    
        
        
            
                <li class="active">FUSEKI DOCKER</li>
            
            
        
    
</ol>




                
            </div>
            <h1 class="title">Fuseki : Docker Tools</h1>
            
	<p>The <a href="https://repo1.maven.org/maven2/org/apache/jena/jena-fuseki-docker/">jena-fuseki-docker package</a>
contains a Dockerfile, docker-compose file, and helper scripts to
create a docker container for Apache Jena Fuseki.</p>
<p>The docker container is based on
<a href="https://jena.apache.org/documentation/fuseki2/fuseki-main">Fuseki main</a>
for running a SPARQL server.</p>
<p>There is no UI - all configuration is by command line and all usage by via the
network protocols.</p>
<p>Databases can be mounted outside the docker container so they are preserved when
the container terminates.</p>
<p>This build system allows the user to customize the docker image.</p>
<p>The docker build downloads the server binary from
<a href="https://repo1.maven.org/maven2/org/apache/jena/jena-fuseki-server/">Maven central</a>,
checking the download against the SHA1 checksum.</p>
<h2 id="database">Database</h2>
<p>There is a volume mapping &ldquo;./databases&rdquo; in the current directory into the server.
This can be used to contain databases outside, but accessible to, the container
that do not get deleted when the container exits.</p>
<p>See examples below.</p>
<h2 id="build">Build</h2>
<p>Choose the version number of Apache Jena release you wish to use. This toolkit
defaults to the version of the overall Jena release it was part of. It is best
to use the release of this set of tools from the same release of the desired
server.</p>
<pre><code>docker-compose build --build-arg JENA_VERSION=3.16.0
</code></pre>
<p>Note the build command must provide the version number.</p>
<h2 id="test-run">Test Run</h2>
<p><code>docker-compose run</code> cam be used to test the build from the previous section.</p>
<p>Examples:</p>
<p>Start Fuseki with an in-memory, updatable dataset at http://<i>host</i>:3030/ds</p>
<pre><code>docker-compose run --rm --service-ports fuseki --mem /ds
</code></pre>
<p>Load a TDB2 database, and expose, read-only, via docker:</p>
<pre><code>mkdir -p databases/DB2
tdb2.tdbloader --loc databases/DB2 MyData.ttl
# Publish read-only
docker-compose run --rm --name MyServer --service-ports fuseki --loc databases/DB2 /ds
</code></pre>
<p>To allow update on the database, add <code>--update</code>. Updates are persisted.</p>
<pre><code>docker-compose run --rm --name MyServer --service-ports fuseki --update --loc databases/DB2 /ds
</code></pre>
<p>See
<a href="https://jena.apache.org/documentation/fuseki2/fuseki-configuration.html">fuseki-configuration</a>
for more information on command line arguments.</p>
<p>To use <code>docker-compose up</code>, edit the <code>docker-compose.yaml</code> to set the Fuseki
command line arguments appropriately.</p>
<h2 id="layout">Layout</h2>
<p>The default layout in the container is:</p>
<table>
<thead>
<tr>
<th>Path</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr>
<td>/opt/java-minimal</td>
<td>A reduced size Java runtime</td>
</tr>
<tr>
<td>/fuseki</td>
<td>The Fuseki installation</td>
</tr>
<tr>
<td>/fuseki/log4j2.properties</td>
<td>Logging configuration</td>
</tr>
<tr>
<td>/fuseki/databases/</td>
<td>Directory for a volume for persistent databases</td>
</tr>
</tbody>
</table>
<h2 id="setting-jvm-arguments">Setting JVM arguments</h2>
<p>Use <code>JAVA_OPTIONS</code>:</p>
<pre><code>docker-compose run --service-ports --rm -e JAVA_OPTIONS=&quot;-Xmx1048m -Xms1048m&quot; --name MyServer fuseki --mem /ds
</code></pre>
<h2 id="docker-commands">Docker Commands</h2>
<p>If you prefer to use <code>docker</code> directly:</p>
<p>Build:</p>
<pre><code>docker build --force-rm --build-arg JENA_VERSION=3.16.0 -t fuseki .
</code></pre>
<p>Run:</p>
<pre><code>docker run -i --rm -p &quot;3030:3030&quot; --name MyServer -t fuseki --mem /ds
</code></pre>
<p>With databases on a bind mount to host filesystem directory:</p>
<pre><code>MNT=&quot;--mount type=bind,src=$PWD/databases,dst=/fuseki/databases&quot;
docker run -i --rm -p &quot;3030:3030&quot; $MNT --name MyServer -t fuseki --update --loc databases/DB2 /ds
</code></pre>
<h2 id="version-specific-notes">Version specific notes:</h2>
<ul>
<li>Versions of Jena up to 3.14.0 use Log4j1 for logging. The docker will build will ignore
the log4j2.properties file</li>
<li>Version 3.15.0: When run, a warning will be emitted.<br>
<code>WARNING: sun.reflect.Reflection.getCallerClass is not supported. This will impact performance.</code><br>
This can be ignored.</li>
</ul>


        </div>
    </div>

</div>

<footer class="footer">
    <div class="container" style="font-size:80%" >
        <p>
            Copyright &copy; 2011&ndash;2023 The Apache Software Foundation, Licensed under the
            <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
        </p>
        <p>
            Apache Jena, Jena, the Apache Jena project logo, Apache and the Apache feather logos are trademarks of
            The Apache Software Foundation.
            <br/>
          <a href="https://privacy.apache.org/policies/privacy-policy-public.html"
             >Apache Software Foundation Privacy Policy</a>.
        </p>
    </div>
</footer>


<script type="text/javascript">
    var link = $('a[href="' + this.location.pathname + '"]');
    if (link != undefined)
        link.parents('li,ul').addClass('active');
</script>

</body>
</html>

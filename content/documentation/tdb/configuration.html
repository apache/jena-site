<!DOCTYPE html>
<html lang="en">
<head>
    

    <title>Apache Jena - TDB Configuration</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="/css/bootstrap-extension.css" rel="stylesheet" type="text/css">
    <link href="/css/jena.css" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href="/images/favicon.ico" />

    <script src="https://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
            crossorigin="anonymous"></script>
    <script src="/js/jena-navigation.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>

    <script src="/js/improve.js" type="text/javascript"></script>

    
</head>

<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/index.html">
                <img class="logo-menu" src="/images/jena-logo/jena-logo-notext-small.png" alt="jena logo">Apache Jena</a>
        </div>

        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                <li id="homepage"><a href="/index.html"><span class="glyphicon glyphicon-home"></span> Home</a></li>
                <li id="download"><a href="/download/index.cgi"><span class="glyphicon glyphicon-download-alt"></span> Download</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-book"></span> Learn <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-header">Tutorials</li>
                        <li><a href="/tutorials/index.html">Overview</a></li>
                        <li><a href="/documentation/fuseki2/index.html">Fuseki Triplestore</a></li>
                        <li><a href="/documentation/notes/index.html">How-To's</a></li>
                        <li><a href="/documentation/query/manipulating_sparql_using_arq.html">Manipulating SPARQL using ARQ</a></li>
                        <li><a href="/tutorials/rdf_api.html">RDF core API tutorial</a></li>
                        <li><a href="/tutorials/sparql.html">SPARQL tutorial</a></li>
                        <li><a href="/tutorials/using_jena_with_eclipse.html">Using Jena with Eclipse</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">References</li>
                        <li><a href="/documentation/index.html">Overview</a></li>
                        <li><a href="/documentation/query/index.html">ARQ (SPARQL)</a></li>
                        <li><a href="/documentation/assembler/index.html">Assembler</a></li>
                        <li><a href="/documentation/tools/index.html">Command-line tools</a></li>
                        <li><a href="/documentation/rdfs/">Data with RDFS Inferencing</a></li>
                        <li><a href="/documentation/geosparql/index.html">GeoSPARQL</a></li>
                        <li><a href="/documentation/inference/index.html">Inference API</a></li>
                        <li><a href="/documentation/javadoc.html">Javadoc</a></li>
                        <li><a href="/documentation/ontology/">Ontology API</a></li>
                        <li><a href="/documentation/permissions/index.html">Permissions</a></li>
                        <li><a href="/documentation/extras/querybuilder/index.html">Query Builder</a></li>
                        <li><a href="/documentation/rdf/index.html">RDF API</a></li>
                        <li><a href="/documentation/rdfconnection/">RDF Connection - SPARQL API</a></li>
                        <li><a href="/documentation/io/">RDF I/O</a></li>
                        <li><a href="/documentation/rdfstar/index.html">RDF-star</a></li>
                        <li><a href="/documentation/shacl/index.html">SHACL</a></li>
                        <li><a href="/documentation/shex/index.html">ShEx</a></li>
                        <li><a href="/documentation/jdbc/index.html">SPARQL over JDBC</a></li>
                        <li><a href="/documentation/tdb/index.html">TDB</a></li>
                        <li><a href="/documentation/tdb2/index.html">TDB2</a></li>
                        <li><a href="/documentation/query/text-query.html">Text Search</a></li>
                    </ul>
                </li>

                <li class="drop down">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-book"></span> Javadoc <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="/documentation/javadoc.html">All Javadoc</a></li>
                        <li><a href="/documentation/javadoc/arq/">ARQ</a></li>
                        <li><a href="/documentation/javadoc/fuseki2/">Fuseki</a></li>
                        <li><a href="/documentation/javadoc/geosparql/">GeoSPARQL</a></li>
                        <li><a href="/documentation/javadoc/jdbc/">JDBC</a></li>
                        <li><a href="/documentation/javadoc/jena/">Jena Core</a></li>
                        <li><a href="/documentation/javadoc/permissions/">Permissions</a></li>
                        <li><a href="/documentation/javadoc/extras/querybuilder/">Query Builder</a></li>
                        <li><a href="/documentation/javadoc/shacl/">SHACL</a></li>
                        <li><a href="/documentation/javadoc/tdb/">TDB</a></li>
                        <li><a href="/documentation/javadoc/text/">Text Search</a></li>
                    </ul>
                </li>

                <li id="ask"><a href="/help_and_support/index.html"><span class="glyphicon glyphicon-question-sign"></span> Ask</a></li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-bullhorn"></span> Get involved <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="/getting_involved/index.html">Contribute</a></li>
                        <li><a href="/help_and_support/bugs_and_suggestions.html">Report a bug</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">Project</li>
                        <li><a href="/about_jena/about.html">About Jena</a></li>
                        <li><a href="/about_jena/architecture.html">Architecture</a></li>
                        <li><a href="/about_jena/citing.html">Citing</a></li>
                        <li><a href="/about_jena/team.html">Project team</a></li>
                        <li><a href="/about_jena/contributions.html">Related projects</a></li>
                        <li><a href="/about_jena/roadmap.html">Roadmap</a></li>
                        <li><a href="/about_jena/security-advisories.html">Security Advisories</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">ASF</li>
                        <li><a href="https://www.apache.org/">Apache Software Foundation</a></li>
                        <li><a href="https://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li>
                        <li><a href="https://www.apache.org/licenses/LICENSE-2.0">License</a></li>
                        <li><a href="https://www.apache.org/security/">Security</a></li>
                        <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    </ul>
                </li>


    

                <li id="edit"><a href="https://github.com/apache/jena-site/edit/main/source/documentation/tdb/configuration.md" title="Edit this page on GitHub"><span class="glyphicon glyphicon-pencil"></span> Edit this page</a></li>
            </ul>
        </div>
    </div>
</nav>


<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div id="breadcrumbs">
                
                    





<ol class="breadcrumb">
    
    
        
        
    
        
        
            
                <li><a href='/documentation'>DOCUMENTATION</a></li>
            
            
        
    
        
        
            
                <li><a href='/documentation/tdb'>TDB</a></li>
            
            
        
    
        
        
            
                <li class="active">CONFIGURATION</li>
            
            
        
    
</ol>




                
            </div>
            <h1 class="title">TDB Configuration</h1>
            
	<p>There are a number of configuration options that affect the
operation of TDB.</p>
<h2 id="contents">Contents</h2>
<ul>
<li><a href="#setting-options">Setting Options</a>
<ul>
<li><a href="#setting-from-the-command-line">Setting from the command line</a></li>
<li><a href="#setting-with-java-system-properties">Setting with Java System properties</a></li>
</ul>
</li>
<li><a href="#query-of-the-union-of-named-graphs">Query of the union of named graphs</a></li>
<li><a href="#logging-query-execution">Logging Query Execution</a></li>
<li><a href="#dataset-caching">Dataset Caching</a></li>
<li><a href="#file-access-mode">File Access Mode</a></li>
<li><a href="#tdb-configuration-symbols">TDB Configuration Symbols</a></li>
<li><a href="#advanced-store-configuration">Advanced Store Configuration</a></li>
</ul>
<h2 id="setting-options">Setting Options</h2>
<p>Options can be set globally, through out the JVM, or on a per query
execution basis. TDB uses the same mechanism as
<a href="http://jena.sf.net/ARQ" title="http://jena.sf.net/ARQ">ARQ</a>.</p>
<p>There is a global context, which is give to each query
execution as it is created. Modifications to the global context
after the query execution is created are not seen by the query
execution. Modifications to the context of a single query execution
do not affect any other query execution nor the global context.</p>
<p>A context is a set of symbol/value pairs. Symbols are used created
internal to ARQ and TDB and accessed via Java constants. Values are
any Java object, together with the values <code>true</code> and <code>false</code>, which
are short for the constants of class <code>java.lang.Boolean</code>.</p>
<p>Setting globally:</p>
<pre><code> TDB.getContext().set(symbol, value)Â ;
</code></pre>
<p>Per query execution:</p>
<pre><code>try(QueryExecution qExec = QueryExecution.dataset(dataset)
            .query(query).set(ARQ.symLogExec,true).build() ) {
     ....
}
</code></pre>
<p>Setting for a query execution happens before any query compilation
or setup happens. Creation of a query execution object does not
compile the query, which happens when the appropriate <code>.exec</code>
method is called.</p>
<h4 id="setting-from-the-command-line">Setting from the command line</h4>
<p>Options can also set from the
<a href="commands.html#setting-options-from-the-command-line" title="TDB/Commands">command line</a>
with &ldquo;<code>--set</code>.</p>
<h4 id="setting-with-java-system-properties">Setting with Java System properties</h4>
<p>(TDB 0.8.5 and later)</p>
<p>Options can be set when invoking the JVM using the Java system
properties as set by &ldquo;<code>-D</code>&rdquo;.</p>
<h2 id="query-of-the-union-of-named-graphs">Query of the union of named graphs</h2>
<p>See <a href="datasets.html" title="TDB/Datasets">TDB/Datasets</a>.</p>
<h2 id="logging-query-execution">Logging Query Execution</h2>
<p>If the symbol &ldquo;<code>tdb:logExec</code>&rdquo; is set to &ldquo;true&rdquo;, and also the logger
<code>org.apache.jena.tdb.exec</code> is enabled from level &ldquo;info&rdquo;, then each
basic graph patterns is logged before execution. This pattern
logged is after substitution of variable values and after
optimization by the
<a href="optimizer.html" title="TDB/Optimizer">BGP optimizer</a>.</p>
<h2 id="dataset-caching">Dataset Caching</h2>
<p>(TDB 0.8.0 and later)</p>
<p>TDB caches datasets based on the location of the backing directory.
Within a single JVM, all attempts to create or open a dataset at a
particular location go through the same dataset (and same disk
caching). Therefore, an application can open the same location
several times in different places in the code and still get the
same underlying dataset for query and update.</p>
<p>Note that closing the dataset closes it everywhere (the opening
calls are not being reference counted).</p>
<h2 id="file-access-mode">File Access Mode</h2>
<p>The context symbol can be set to &ldquo;mapped&rdquo; or &ldquo;direct&rdquo;. Unset, or
the value &ldquo;default&rdquo;, ask TDB to use to make the choice based on
JVM. Leaving it to the default is <em>strongly</em> encouraged.</p>
<h2 id="tdb-configuration-symbols">TDB Configuration Symbols</h2>
<p>Configuration Symbols</p>
<table>
<thead>
<tr>
<th>Symbol</th>
<th>Java Constant</th>
<th>Effect</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tdb:logExec</code></td>
<td><code>TDB.symLogExec</code></td>
<td>Log execution of BGPs. Set to &ldquo;true&rdquo; to enable. Must also enable the logger &ldquo;org.apache.jena.tdb.exec&rdquo;.</td>
<td>unset</td>
</tr>
<tr>
<td><code>tdb:unionDefaultGraph</code></td>
<td><code>TDB.symUnionDefaultGraph</code></td>
<td>Query patterns on the default graph match against the union of the named graphs.</td>
<td>unset</td>
</tr>
<tr>
<td><code>tdb:fileMode</code></td>
<td><code>SystemTDB.fileMode</code></td>
<td>Force use of memory mapped files (<code>&quot;mapped&quot;</code>) or direct file caching (<code>&quot;direct&quot;</code>). See discussion of TDB on 32 or 64 bit hardware, especially limitations of memory mapped files on 32 bit Java.</td>
<td>Set by the system based on 32 or 64 bit java.</td>
</tr>
</tbody>
</table>
<h2 id="advanced-store-configuration">Advanced Store Configuration</h2>
<p>Various internal caching sizes can be set to different values to the
defaults. See the <a href="store-parameters.html">full description</a>.</p>


        </div>
    </div>

</div>

<footer class="footer">
    <div class="container" style="font-size:80%" >
        <p>
            Copyright &copy; 2011&ndash;2023 The Apache Software Foundation, Licensed under the
            <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
        </p>
        <p>
            Apache Jena, Jena, the Apache Jena project logo, Apache and the Apache feather logos are trademarks of
            The Apache Software Foundation.
            <br/>
          <a href="https://privacy.apache.org/policies/privacy-policy-public.html"
             >Apache Software Foundation Privacy Policy</a>.
        </p>
    </div>
</footer>


<script type="text/javascript">
    var link = $('a[href="' + this.location.pathname + '"]');
    if (link != undefined)
        link.parents('li,ul').addClass('active');
</script>

</body>
</html>
